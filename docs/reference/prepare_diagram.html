<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Create data frames for plotting from model elements. — prepare_diagram • flowdiagramr</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Create data frames for plotting from model elements. — prepare_diagram"><meta property="og:description" content="This function takes as input a model consisting of variables/compartments
and flows, and creates a list of data frames with label and position
information for plotting a flow diagram.
The resulting object is used as an input to make_diagram,
which creates a ggplot2 based diagram. The function attempts to make
decent decisions regarding the placement of variables (boxes),
flows (arrows), and labels. However, complex models with complex diagrams
will likely need user modification. This is documented in the vignettes."><meta property="og:image" content="https://andreashandel.github.io/flowdiagramr/index.html/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">flowdiagramr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.2.6</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/A_quickstart.html">Get started</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Tutorials
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/A_quickstart.html">Quick Start Guide</a>
    </li>
    <li>
      <a href="../articles/B_prepare_diagram_settings.html">Modifying diagrams I</a>
    </li>
    <li>
      <a href="../articles/C_update_diagram_function.html">Modifying diagrams II</a>
    </li>
    <li>
      <a href="../articles/D_modify_ggplot_code.html">Modifying the ggplot2 object or code</a>
    </li>
    <li>
      <a href="../articles/E_non_model_diagrams.html">Making non-model based diagrams</a>
    </li>
    <li>
      <a href="../articles/F_additional_examples.html">Additional diagram examples</a>
    </li>
    <li>
      <a href="../articles/G_additional_topics.html">Additional topics</a>
    </li>
    <li>
      <a href="../articles/H_comparison_to_other_packages.html">Comparison to other R packages</a>
    </li>
  </ul></li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/andreashandel/flowdiagramr" class="external-link">
    <span class="fab fa-github"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Create data frames for plotting from model elements.</h1>
    <small class="dont-index">Source: <a href="https://github.com/andreashandel/flowdiagramr/blob/HEAD/R/prepare_diagram.R" class="external-link"><code>R/prepare_diagram.R</code></a></small>
    <div class="hidden name"><code>prepare_diagram.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>This function takes as input a model consisting of variables/compartments
and flows, and creates a list of data frames with label and position
information for plotting a flow diagram.
The resulting object is used as an input to <code><a href="make_diagram.html">make_diagram</a></code>,
which creates a <strong>ggplot2</strong> based diagram. The function attempts to make
decent decisions regarding the placement of variables (boxes),
flows (arrows), and labels. However, complex models with complex diagrams
will likely need user modification. This is documented in the vignettes.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="fu">prepare_diagram</span><span class="op">(</span>
  <span class="va">model_list</span>,
  model_settings <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>varlocations <span class="op">=</span> <span class="cn">NULL</span>, varbox_x_size <span class="op">=</span> <span class="cn">NULL</span>, varbox_y_size <span class="op">=</span>
    <span class="cn">NULL</span>, varspace_x_size <span class="op">=</span> <span class="cn">NULL</span>, varspace_y_size <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span>
<span class="op">)</span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>model_list</dt>
<dd><p>A list of model elements. This list is required and
must contain these two elements:</p><ul><li><p><code>variables</code>: A character vector specifying the names of all variables.</p></li>
<li><p><code>flows</code>: A list that is the same length as <code>variables</code>. Each sub-list
element is a character vector of any length specifying the flows into
and out of the variable. Note that <strong>flowdiagramr</strong> assumes that the
order of <code>flows</code> matches that of the <code>variables</code> vector.</p></li>
<li><p>IMPORTANT: All <code>variables</code> entries must start with an upper case letter,
followed by any combination of letters and numbers
(e.g., S, Si, or Aml2). All parameters contained in <code>flows</code> must start
with a lower case letter followed by any combination of letters and
numbers (e.g., b, bBmax, kS, p21S). All variables and parameters MUST
be separated by math notation (e.g., +, -, *, /). Most math functions
(e.g., <code>sin</code>, <code>cos</code>) are currently not supported.</p></li>
<li><p>See examples and details below and vignettes.</p></li>
</ul></dd>
<dt>model_settings</dt>
<dd><p>A list of optional settings to adjust layout. The
following elements are supported. If not provided, they default to a
single row and all sizes of 1.</p><ul><li><p><code>varlocations</code>: A matrix containing all <code>model_list$variables</code> entries
in specific locations on a grid. See examples.</p></li>
<li><p><code>varbox_x_size</code>: Either a scalar or a vector that changes the default
width of variable boxes. For example, <code>varbox_x_size = 1.5</code> makes each
box 1.5 units in width. If a scalar, the value is used for all variables.
If a vector, the length must correspond to number of variables,
and the provided values are applied to the variables in the order
provided in <code>model_list$vars</code>.</p></li>
<li><p><code>varbox_y_size</code>: Same as <code>varbox_x_size</code> but for the height of
the boxes.</p></li>
<li><p><code>varspace_x_size</code>:  Either a scalar or a vector that changes the
spacing between variable boxes in the x/horizontal dimension. If
<code>varspace_x_size</code> is a scalar, all spaces between boxes in the x
direction will be the same. For example, <code>varspace_x_size = 1.5</code> puts
1.5 units of space in the x direction between boxes. If you provide a
vector, it needs to be of dimension one less than the number of columns
in <code>varlocations</code>. Spacing starts at the left, thus the first number is
the spacing between the first column and second column, etc. Spacing
is measured between the right edge of one box to the left edge of
the next box.</p></li>
<li><p><code>varspace_y_size</code>:  Same as <code>varspace_y_size</code> but for the vertical
dimension. If you provide a vector, it needs to be of dimension one
less than the number of rows in <code>varlocations</code>. Spacing starts at the
bottom, thus the first number is the spacing between the lowest and
second lowest row, etc. Spacing is measured between the bottom edge
of one box to the top edge og the next box.</p></li>
<li><p>See examples and details below and vignettes.</p></li>
</ul></dd>
</dl></div>
    <div id="value">
    <h2>Value</h2>
    <p>A list of two data frames containing all necessary information
for the model variables/boxes and flows/arrows to be plotted
by the <code><a href="make_diagram.html">make_diagram</a></code> function.
The data frames are:</p><ul><li><p><code>variables</code>: A data frame containing information for all variables.
The data frame contains these columns:</p><ul><li><p><code>id</code>: A numeric id for each variable.</p></li>
<li><p><code>name</code>: The name of the variable as provided in the model
specification.</p></li>
<li><p><code>xmin</code>: Left edge location of variable box.</p></li>
<li><p><code>xmax</code>: Right edge location of variable  box.</p></li>
<li><p><code>ymin</code>: Lower edge of location variable box.</p></li>
<li><p><code>ymax</code>: Upper edge of location variable  box.</p></li>
<li><p><code>xlabel</code>: Horizontal position (midpoint) of label.</p></li>
<li><p><code>ylabel</code>: Vertical position (midpoint) of label.</p></li>
<li><p><code>label_text</code>: Text that will appear as the label of the box. Can
be different from <code>name</code>.</p></li>
<li><p><code>outline_color</code>: The outline color of variable boxes.</p></li>
<li><p><code>fill_color</code>: The fill color of the variable boxes.</p></li>
<li><p><code>label_color</code>: The color of the box labels for each variable.</p></li>
<li><p><code>label_size</code>: Text size for variable labels.</p></li>
</ul></li>
<li><p><code>flows</code>: A data frame containing information for all flows.
The data frame contains these columns:</p><ul><li><p><code>id</code>: A numeric id for each flow.</p></li>
<li><p><code>name</code>: The name of the flow. Typically a mathematical expression.
If a main flow with an interaction, this name is for id purposes
only because the <code>label_text</code> will be the actual label displayed
in the diagram. Thus, the name might be duplicated in other rows.</p></li>
<li><p><code>type</code>: Type of flow. One of main, interaction, or external.</p></li>
<li><p><code>from</code>: The variable from which the arrow originate. That is, the
variable donating the flow.</p></li>
<li><p><code>to</code>: The variable to which the arrow will point. That is, the
variable receiving the flow.</p></li>
<li><p><code>xstart</code>: The starting horizontal position of the arrow.</p></li>
<li><p><code>xend</code>: The ending horizontal position of the arrow.</p></li>
<li><p><code>ystart</code>: The starting vertical position of the arrow.</p></li>
<li><p><code>yend</code>: The ending vertical position of the arrow.</p></li>
<li><p><code>xlabel</code>: Horizontal position (midpoint) of label.</p></li>
<li><p><code>ylabel</code>: Vertical position (midpoint) of label.</p></li>
<li><p><code>curvature</code>: The amount of curvature applied to arrow.
Higher numbers indicate more curvature; 0 = straight line.</p></li>
<li><p><code>label_text</code>: The label that will appear in the diagram. This is a
duplicate of <code>name</code> so that user can update <code>label_text</code> as desired
but retain the original math for reference.</p></li>
<li><p><code>line_color</code>: The color of the flow arrow line.</p></li>
<li><p><code>line_size</code>: The size (width) of the flow arrow line.</p></li>
<li><p><code>line_type</code>: The linetype of the flow arrow line.</p></li>
<li><p><code>label_color</code>: Color of <code>label_text</code>.</p></li>
<li><p><code>label_size</code>: The text size of <code>label_text</code>.</p></li>
<li><p><code>arrow_size</code>: The size of the arrow point on the flow line.</p></li>
<li><p><code>show_arrow</code>: Logical for whether to plot the flow arrow line
(TRUE) or not (FALSE).</p></li>
</ul></li>
</ul></div>
    <div id="details">
    <h2>Details</h2>
    <p><code>variables</code> needs to be specified as a vector of model variables,
e.g., <code>variables &lt;- c("Pred","Prey")</code>. <code>flows</code> need to be specified as a
list, with each list entry containing the flows/processes for each
variable in the order in which the variables appear. Flows need to be
named according to <code>VARIABLENAME_flows</code>.</p>
<p>Example:</p>
<p><code>flows &lt;- list(Pred_flows = c(r*Pred, -k1*Pred*Prey),
   Prey_flows = c(g*Prey, -k2*Pred*Prey))</code>. Each flow, i.e. each entry in
the flow vector, needs to be a valid mathematical expression made up of
variables and parameters. The rules are as described above.
As an example, the following includes a parameter <em>b</em> and two variables,
<em>S</em> and <em>I</em>: <code>b*S*I</code>. The following includes a parameter <em>s</em> and two
variables, <em>Bg</em> and <em>I2</em>: <code>Bg*s*I2</code>. See more examples below and in
the vignettes.</p>
<p>The variables and flows data frames returned in the output list from this
function contain a few columns that are provided to make it easier for
the user to make changes to the data frames manually, but are not used
by the package to make the diagram itself. In the <code>variables</code> data frame,
<code>id</code> and <code>name</code> are unique identifiers that are not used by the package
to make the diagram -- changing these will have no impact on the final
diagram. In the <code>flows</code> data frame, <code>id</code>, <code>name</code>, <code>from</code>, and <code>to</code> are
identifiers provided to make it easier for the user to understand each
row of the data frame. Changing these columns will have no impact on the
final diagram. All other columns contain information that impacts the
drawn diagram itself. Users can update them -- and may want to in many
cases -- but any updates to values in the remaining columns will be seen
in the diagram itself. See the description of the output data frames below.</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span class="co"># basic model specification</span></span>
<span class="r-in"><span class="va">variables</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"S"</span>,<span class="st">"I"</span>,<span class="st">"R"</span><span class="op">)</span></span>
<span class="r-in"><span class="va">flows</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>S_flows <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"-b*S*I"</span><span class="op">)</span>,</span>
<span class="r-in">              I_flows <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"b*S*I"</span>,<span class="st">"-g*I"</span><span class="op">)</span>,</span>
<span class="r-in">              R_flows <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"g*I"</span><span class="op">)</span><span class="op">)</span></span>
<span class="r-in"><span class="va">mymodel</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>variables <span class="op">=</span> <span class="va">variables</span>, flows <span class="op">=</span> <span class="va">flows</span><span class="op">)</span></span>
<span class="r-in"><span class="va">diag_list</span> <span class="op">&lt;-</span> <span class="fu">prepare_diagram</span><span class="op">(</span>model_list <span class="op">=</span> <span class="va">mymodel</span><span class="op">)</span></span>
<span class="r-in"><span class="va">mydiag</span> <span class="op">&lt;-</span> <span class="fu"><a href="make_diagram.html">make_diagram</a></span><span class="op">(</span><span class="va">diag_list</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># adding optional specifications</span></span>
<span class="r-in"><span class="va">varlocations</span> <span class="op">&lt;-</span>  <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span>data <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"S"</span>, <span class="st">""</span>, <span class="st">"R"</span>,</span>
<span class="r-in">                                 <span class="st">""</span>, <span class="st">"I"</span>, <span class="st">""</span> <span class="op">)</span>,</span>
<span class="r-in">                        nrow <span class="op">=</span> <span class="fl">2</span>, ncol <span class="op">=</span> <span class="fl">3</span>, byrow <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span class="r-in"><span class="va">mysettings</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>varlocations <span class="op">=</span> <span class="va">varlocations</span><span class="op">)</span></span>
<span class="r-in"><span class="va">diag_list</span> <span class="op">&lt;-</span> <span class="fu">prepare_diagram</span><span class="op">(</span>model_list <span class="op">=</span> <span class="va">mymodel</span>, model_settings <span class="op">=</span> <span class="va">mysettings</span><span class="op">)</span></span>
<span class="r-in"><span class="va">mydiag</span> <span class="op">&lt;-</span> <span class="fu"><a href="make_diagram.html">make_diagram</a></span><span class="op">(</span><span class="va">diag_list</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># use of model_settings to change sizes and spacing, including vectorization</span></span>
<span class="r-in"><span class="va">variables</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"S"</span>,<span class="st">"I"</span>,<span class="st">"R"</span><span class="op">)</span></span>
<span class="r-in"><span class="va">flows</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>S_flows <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"-b*S*I"</span><span class="op">)</span>,</span>
<span class="r-in">              I_flows <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"b*S*I"</span>,<span class="st">"-g*I"</span><span class="op">)</span>,</span>
<span class="r-in">              R_flows <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"g*I"</span><span class="op">)</span><span class="op">)</span></span>
<span class="r-in"><span class="va">mymodel</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>variables <span class="op">=</span> <span class="va">variables</span>, flows <span class="op">=</span> <span class="va">flows</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="va">var_locs</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"S"</span>, <span class="st">""</span>, <span class="st">"R"</span>, <span class="st">""</span>, <span class="st">"I"</span>, <span class="st">""</span><span class="op">)</span>, byrow <span class="op">=</span> <span class="cn">TRUE</span>, nrow <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span>
<span class="r-in"><span class="va">mysettings</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span class="r-in">  varlocations <span class="op">=</span> <span class="va">var_locs</span>,</span>
<span class="r-in">  varbox_x_size <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">2</span>,<span class="fl">1</span><span class="op">)</span>,</span>
<span class="r-in">  varbox_y_size <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.5</span>,<span class="fl">0.5</span>,<span class="fl">2</span><span class="op">)</span>,</span>
<span class="r-in">  varspace_x_size <span class="op">=</span> <span class="fl">2</span>,</span>
<span class="r-in">  varspace_y_size <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="va">diag_list</span> <span class="op">&lt;-</span> <span class="fu">prepare_diagram</span><span class="op">(</span>model_list <span class="op">=</span> <span class="va">mymodel</span>,</span>
<span class="r-in">                             model_settings <span class="op">=</span> <span class="va">mysettings</span><span class="op">)</span></span>
<span class="r-in"><span class="fu"><a href="make_diagram.html">make_diagram</a></span><span class="op">(</span><span class="va">diag_list</span><span class="op">)</span></span>
<span class="r-plt img"><img src="prepare_diagram-1.png" alt="" width="700" height="433"></span>
<span class="r-in"></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># another simple model for pathogen (prey) and immune response (predator)</span></span>
<span class="r-in"><span class="va">variables</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Pat"</span>,<span class="st">"Imm"</span><span class="op">)</span></span>
<span class="r-in"><span class="va">flows</span>     <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>Pat_flows <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"g*Pat*(1-Pat/pmax)"</span>, <span class="st">"-dP*Pat"</span>, <span class="st">"-k*Pat*Imm"</span><span class="op">)</span>,</span>
<span class="r-in">                 Imm_flows <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"r*Pat*Imm"</span>, <span class="st">"-dI*Imm"</span><span class="op">)</span><span class="op">)</span></span>
<span class="r-in"><span class="va">mymodel</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">variables</span>, <span class="va">flows</span><span class="op">)</span></span>
<span class="r-in"><span class="va">diag_list</span> <span class="op">&lt;-</span> <span class="fu">prepare_diagram</span><span class="op">(</span><span class="va">mymodel</span><span class="op">)</span></span>
<span class="r-in"><span class="va">mydiag</span> <span class="op">&lt;-</span> <span class="fu"><a href="make_diagram.html">make_diagram</a></span><span class="op">(</span><span class="va">diag_list</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># manually switch to vertical layout</span></span>
<span class="r-in"><span class="va">varlocations</span> <span class="op">&lt;-</span>  <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span>data <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Pat"</span>, <span class="st">"Imm"</span><span class="op">)</span>,</span>
<span class="r-in">                        nrow <span class="op">=</span> <span class="fl">2</span>, byrow <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span class="r-in"><span class="va">mysettings</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>varlocations <span class="op">=</span> <span class="va">varlocations</span><span class="op">)</span></span>
<span class="r-in"><span class="va">diag_list</span> <span class="op">&lt;-</span> <span class="fu">prepare_diagram</span><span class="op">(</span><span class="va">mymodel</span>,<span class="va">mysettings</span><span class="op">)</span></span>
<span class="r-in"><span class="va">mydiag</span> <span class="op">&lt;-</span> <span class="fu"><a href="make_diagram.html">make_diagram</a></span><span class="op">(</span><span class="va">diag_list</span><span class="op">)</span></span>
<span class="r-in"></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by <a href="https://www.andreashandel.com" class="external-link">Andreas Handel</a>, Andrew Tredennick.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.3.</p>
</div>

      </footer></div>

  


  

  </body></html>

