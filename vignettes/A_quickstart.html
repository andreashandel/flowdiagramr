<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />



<title>A quick start to flowdiagramr</title>

<script src="data:application/javascript;base64,Ly8gUGFuZG9jIDIuOSBhZGRzIGF0dHJpYnV0ZXMgb24gYm90aCBoZWFkZXIgYW5kIGRpdi4gV2UgcmVtb3ZlIHRoZSBmb3JtZXIgKHRvCi8vIGJlIGNvbXBhdGlibGUgd2l0aCB0aGUgYmVoYXZpb3Igb2YgUGFuZG9jIDwgMi44KS4KZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGZ1bmN0aW9uKGUpIHsKICB2YXIgaHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCJkaXYuc2VjdGlvbltjbGFzcyo9J2xldmVsJ10gPiA6Zmlyc3QtY2hpbGQiKTsKICB2YXIgaSwgaCwgYTsKICBmb3IgKGkgPSAwOyBpIDwgaHMubGVuZ3RoOyBpKyspIHsKICAgIGggPSBoc1tpXTsKICAgIGlmICghL15oWzEtNl0kL2kudGVzdChoLnRhZ05hbWUpKSBjb250aW51ZTsgIC8vIGl0IHNob3VsZCBiZSBhIGhlYWRlciBoMS1oNgogICAgYSA9IGguYXR0cmlidXRlczsKICAgIHdoaWxlIChhLmxlbmd0aCA+IDApIGgucmVtb3ZlQXR0cmlidXRlKGFbMF0ubmFtZSk7CiAgfQp9KTsK"></script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>


<style type="text/css">
  code {
    white-space: pre;
  }
  .sourceCode {
    overflow: visible;
  }
</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */

</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    for (var j = 0; j < rules.length; j++) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") continue;
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') continue;
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>




<link rel="stylesheet" href="data:text/css,body%20%7B%0Abackground%2Dcolor%3A%20%23fff%3B%0Amargin%3A%201em%20auto%3B%0Amax%2Dwidth%3A%20700px%3B%0Aoverflow%3A%20visible%3B%0Apadding%2Dleft%3A%202em%3B%0Apadding%2Dright%3A%202em%3B%0Afont%2Dfamily%3A%20%22Open%20Sans%22%2C%20%22Helvetica%20Neue%22%2C%20Helvetica%2C%20Arial%2C%20sans%2Dserif%3B%0Afont%2Dsize%3A%2014px%3B%0Aline%2Dheight%3A%201%2E35%3B%0A%7D%0A%23TOC%20%7B%0Aclear%3A%20both%3B%0Amargin%3A%200%200%2010px%2010px%3B%0Apadding%3A%204px%3B%0Awidth%3A%20400px%3B%0Aborder%3A%201px%20solid%20%23CCCCCC%3B%0Aborder%2Dradius%3A%205px%3B%0Abackground%2Dcolor%3A%20%23f6f6f6%3B%0Afont%2Dsize%3A%2013px%3B%0Aline%2Dheight%3A%201%2E3%3B%0A%7D%0A%23TOC%20%2Etoctitle%20%7B%0Afont%2Dweight%3A%20bold%3B%0Afont%2Dsize%3A%2015px%3B%0Amargin%2Dleft%3A%205px%3B%0A%7D%0A%23TOC%20ul%20%7B%0Apadding%2Dleft%3A%2040px%3B%0Amargin%2Dleft%3A%20%2D1%2E5em%3B%0Amargin%2Dtop%3A%205px%3B%0Amargin%2Dbottom%3A%205px%3B%0A%7D%0A%23TOC%20ul%20ul%20%7B%0Amargin%2Dleft%3A%20%2D2em%3B%0A%7D%0A%23TOC%20li%20%7B%0Aline%2Dheight%3A%2016px%3B%0A%7D%0Atable%20%7B%0Amargin%3A%201em%20auto%3B%0Aborder%2Dwidth%3A%201px%3B%0Aborder%2Dcolor%3A%20%23DDDDDD%3B%0Aborder%2Dstyle%3A%20outset%3B%0Aborder%2Dcollapse%3A%20collapse%3B%0A%7D%0Atable%20th%20%7B%0Aborder%2Dwidth%3A%202px%3B%0Apadding%3A%205px%3B%0Aborder%2Dstyle%3A%20inset%3B%0A%7D%0Atable%20td%20%7B%0Aborder%2Dwidth%3A%201px%3B%0Aborder%2Dstyle%3A%20inset%3B%0Aline%2Dheight%3A%2018px%3B%0Apadding%3A%205px%205px%3B%0A%7D%0Atable%2C%20table%20th%2C%20table%20td%20%7B%0Aborder%2Dleft%2Dstyle%3A%20none%3B%0Aborder%2Dright%2Dstyle%3A%20none%3B%0A%7D%0Atable%20thead%2C%20table%20tr%2Eeven%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0A%7D%0Ap%20%7B%0Amargin%3A%200%2E5em%200%3B%0A%7D%0Ablockquote%20%7B%0Abackground%2Dcolor%3A%20%23f6f6f6%3B%0Apadding%3A%200%2E25em%200%2E75em%3B%0A%7D%0Ahr%20%7B%0Aborder%2Dstyle%3A%20solid%3B%0Aborder%3A%20none%3B%0Aborder%2Dtop%3A%201px%20solid%20%23777%3B%0Amargin%3A%2028px%200%3B%0A%7D%0Adl%20%7B%0Amargin%2Dleft%3A%200%3B%0A%7D%0Adl%20dd%20%7B%0Amargin%2Dbottom%3A%2013px%3B%0Amargin%2Dleft%3A%2013px%3B%0A%7D%0Adl%20dt%20%7B%0Afont%2Dweight%3A%20bold%3B%0A%7D%0Aul%20%7B%0Amargin%2Dtop%3A%200%3B%0A%7D%0Aul%20li%20%7B%0Alist%2Dstyle%3A%20circle%20outside%3B%0A%7D%0Aul%20ul%20%7B%0Amargin%2Dbottom%3A%200%3B%0A%7D%0Apre%2C%20code%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0Aborder%2Dradius%3A%203px%3B%0Acolor%3A%20%23333%3B%0Awhite%2Dspace%3A%20pre%2Dwrap%3B%20%0A%7D%0Apre%20%7B%0Aborder%2Dradius%3A%203px%3B%0Amargin%3A%205px%200px%2010px%200px%3B%0Apadding%3A%2010px%3B%0A%7D%0Apre%3Anot%28%5Bclass%5D%29%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0A%7D%0Acode%20%7B%0Afont%2Dfamily%3A%20Consolas%2C%20Monaco%2C%20%27Courier%20New%27%2C%20monospace%3B%0Afont%2Dsize%3A%2085%25%3B%0A%7D%0Ap%20%3E%20code%2C%20li%20%3E%20code%20%7B%0Apadding%3A%202px%200px%3B%0A%7D%0Adiv%2Efigure%20%7B%0Atext%2Dalign%3A%20center%3B%0A%7D%0Aimg%20%7B%0Abackground%2Dcolor%3A%20%23FFFFFF%3B%0Apadding%3A%202px%3B%0Aborder%3A%201px%20solid%20%23DDDDDD%3B%0Aborder%2Dradius%3A%203px%3B%0Aborder%3A%201px%20solid%20%23CCCCCC%3B%0Amargin%3A%200%205px%3B%0A%7D%0Ah1%20%7B%0Amargin%2Dtop%3A%200%3B%0Afont%2Dsize%3A%2035px%3B%0Aline%2Dheight%3A%2040px%3B%0A%7D%0Ah2%20%7B%0Aborder%2Dbottom%3A%204px%20solid%20%23f7f7f7%3B%0Apadding%2Dtop%3A%2010px%3B%0Apadding%2Dbottom%3A%202px%3B%0Afont%2Dsize%3A%20145%25%3B%0A%7D%0Ah3%20%7B%0Aborder%2Dbottom%3A%202px%20solid%20%23f7f7f7%3B%0Apadding%2Dtop%3A%2010px%3B%0Afont%2Dsize%3A%20120%25%3B%0A%7D%0Ah4%20%7B%0Aborder%2Dbottom%3A%201px%20solid%20%23f7f7f7%3B%0Amargin%2Dleft%3A%208px%3B%0Afont%2Dsize%3A%20105%25%3B%0A%7D%0Ah5%2C%20h6%20%7B%0Aborder%2Dbottom%3A%201px%20solid%20%23ccc%3B%0Afont%2Dsize%3A%20105%25%3B%0A%7D%0Aa%20%7B%0Acolor%3A%20%230033dd%3B%0Atext%2Ddecoration%3A%20none%3B%0A%7D%0Aa%3Ahover%20%7B%0Acolor%3A%20%236666ff%3B%20%7D%0Aa%3Avisited%20%7B%0Acolor%3A%20%23800080%3B%20%7D%0Aa%3Avisited%3Ahover%20%7B%0Acolor%3A%20%23BB00BB%3B%20%7D%0Aa%5Bhref%5E%3D%22http%3A%22%5D%20%7B%0Atext%2Ddecoration%3A%20underline%3B%20%7D%0Aa%5Bhref%5E%3D%22https%3A%22%5D%20%7B%0Atext%2Ddecoration%3A%20underline%3B%20%7D%0A%0Acode%20%3E%20span%2Ekw%20%7B%20color%3A%20%23555%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Edt%20%7B%20color%3A%20%23902000%3B%20%7D%20%0Acode%20%3E%20span%2Edv%20%7B%20color%3A%20%2340a070%3B%20%7D%20%0Acode%20%3E%20span%2Ebn%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Efl%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Ech%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Est%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Eco%20%7B%20color%3A%20%23888888%3B%20font%2Dstyle%3A%20italic%3B%20%7D%20%0Acode%20%3E%20span%2Eot%20%7B%20color%3A%20%23007020%3B%20%7D%20%0Acode%20%3E%20span%2Eal%20%7B%20color%3A%20%23ff0000%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Efu%20%7B%20color%3A%20%23900%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Eer%20%7B%20color%3A%20%23a61717%3B%20background%2Dcolor%3A%20%23e3d2d2%3B%20%7D%20%0A" type="text/css" />




</head>

<body>




<h1 class="title toc-ignore">A quick start to flowdiagramr</h1>



<div id="overview" class="section level2">
<h2>Overview</h2>
<p><strong>flowdiagramr</strong> is designed to create nice-looking diagrams for compartmental simulation models and other kinds of scenarios where a model with compartments/variables/nodes and flows/connections/edges is needed. The user provides the compartments and the flows, and gets as return a model diagram in ggplot format, as well as code that created the diagram. This allows potentially complete customization of the diagram.</p>
</div>
<div id="terminology" class="section level2">
<h2>Terminology</h2>
<p>The kinds of models and diagrams we are discussing here are used in many different areas of science. That also means there are many different ways and words to describe these models. What we mainly refer to as <em>compartments</em> or <em>variables</em> is also known as <em>stocks</em> or <em>nodes</em>. Similarly, what we mainly refer to as <em>flows</em> or <em>processes</em> is also known as <em>connections</em> or <em>edges</em>. Other terminology exists. While we try to use <strong>variables</strong> and <strong>flows</strong> as consistently as possible, we might occasionally accidentally use one of the other terms. We hope by showing examples it will be clear.</p>
</div>
<div id="starting-example" class="section level2">
<h2>Starting Example</h2>
<p>Here is a simple example to illustrate what <strong>flowdiagramr</strong> does.</p>
<p>Consider the <a href="https://en.wikipedia.org/wiki/Compartmental_models_in_epidemiology">Susceptible-Infected-Recovered (SIR) model</a> which forms the basis of many models used in infectious disease epidemiology. For this model, we have 3 compartments/variables, name susceptible individuals, <strong>S</strong>, infected/infectious individuals, <strong>I</strong>, and recovered/removed individuals, <strong>R</strong>. We also have 2 processes/flows, one process by which susceptible individuals become infected at some rate after contact with infectious individuals, <strong>b*S*I</strong> and a process by which infected individuals recover at some rate, <strong>g*I.</strong></p>
<p>Written out as differential equations, the model looks like this</p>
<p><span class="math display">\[
\begin{aligned}
\dot S &amp; = - b S I \\ 
\dot I &amp; = b S I - g I \\
\dot R &amp; = g I 
\end{aligned}
\]</span></p>
<p>A diagram for the model looks as follows</p>
<div class="figure" style="text-align: center">
<img src="data:image/png;base64,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" alt="Flow diagram for basic SIR model" width="90%" />
<p class="caption">
Flow diagram for basic SIR model
</p>
</div>
<p>The purpose of <strong>flowdiagramr</strong> is to automatically create this diagram for you if you supply the model specification. Here is how.</p>
<div id="specify-the-model" class="section level3">
<h3>Specify the model</h3>
<p><strong>flowdiagramr</strong> requires that the model is specified as a simple list structure. This list needs to have 2 elements, the variable/compartment labels and the processes/flows for each compartment. For the model above, this looks as follows:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>varlabels <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&quot;S&quot;</span>,<span class="st">&quot;I&quot;</span>,<span class="st">&quot;R&quot;</span>)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>flows <span class="ot">=</span> <span class="fu">list</span>(<span class="at">S_flows =</span> <span class="fu">c</span>(<span class="st">&quot;-b*S*I&quot;</span>), </span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>             <span class="at">I_flows =</span> <span class="fu">c</span>(<span class="st">&quot;b*S*I&quot;</span>,<span class="st">&quot;-g*I&quot;</span>), </span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>             <span class="at">R_flows =</span> <span class="fu">c</span>(<span class="st">&quot;g*I&quot;</span>))</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>mymodel <span class="ot">=</span> <span class="fu">list</span>(<span class="at">varlabels =</span> varlabels, <span class="at">flows =</span> flows)</span></code></pre></div>
<p><strong>Model specification conventions and requirements:</strong></p>
<ul>
<li>The main list (called <code>mymodel</code> above) can have any name.</li>
<li>The elements inside the list need to be called <code>varlabels</code> and <code>flows</code>.</li>
<li>A model consists of variables and parameters, combined by basic mathematical expressions. Currently allowed are <code>+, -, *, (),/,^</code>. Mathematical operations such as <code>log</code>, <code>sin</code>, etc. are currently not supported.</li>
<li>All variable labels need to start with an upper-case letter and can be any combination of letters and numbers.</li>
<li>All parameters need to start with a lower-case letter and can be any combination of letters and numbers.</li>
<li>The flows for each variable need to be named <code>NN_flows</code> where NN corresponds to the variable label.</li>
<li>Each flow needs to be provided as a valid mathematical/R expression, that would evaluate in R if you assigned numbers to each parameter and variable. For instance you need to write <code>b*S*I</code>, writing it as <code>bSI</code> will not work.</li>
<li>Minus signs for outflows are required, plus signs for inflows are optional.</li>
</ul>
</div>
<div id="create-elements-needed-for-diagram-generation" class="section level3">
<h3>Create elements needed for diagram generation</h3>
<p>Once you specified your model in the list structure just described, the next step is to process the model, then make the diagram. This happens in two steps, which has the advantage of easier diagram modification. You’ll learn more about that in subsequent vignettes. For now, we just show the steps, then revisit them later.</p>
<p>To get ready for diagram generation, you send your model to the <code>prepare_diagram</code> function.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>diagram_list <span class="ot">&lt;-</span> <span class="fu">prepare_diagram</span>(mymodel)</span></code></pre></div>
<p>The <code>diagram_list</code> object returned by this function contains a list of data frames that is used to make the diagram. We’ll skip over this for now and revisit it in a later vignette.</p>
</div>
<div id="make-the-diagram" class="section level3">
<h3>Make the diagram</h3>
<p>Now it’s time to make the diagram. This is done by sending the object you got by calling <code>prepare_diagram</code> to the <code>make_diagram</code> function, like so</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>my_diagram <span class="ot">&lt;-</span> <span class="fu">make_diagram</span>(diagram_list)</span></code></pre></div>
<p><code>make_diagram</code> returns a ggplot2 object (here called <code>my_diagram</code>).</p>
<p>You you can plot the object with</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(my_diagram)</span></code></pre></div>
<p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAqAAAAEgCAMAAABcujGyAAABOFBMVEUAAAAAADoAAGYAOjoAOmYAOpAAZrY6AAA6OgA6Ojo6OmY6ZpA6ZrY6kLY6kNtAQEBmAABmADpmOgBmOjpmZgBmkJBmkLZmtttmtv9qpMhqpNJqpNtqtNJqtNtqtORqw+2FpMiFtMiFtNuFw+SFw+2F0/aQOgCQZjqQZmaQkGaQtpCQttuQ29uQ2/+epMietMietNKe0+2e4fae4f+2ZgC2Zjq2kDq2kGa2ttu22/+2/9u2//+4tMi4w9K4w9u40+244fa48P/Qw8jQw9LQ09LQ09vQ4eTQ4fbQ8PbQ8P/Q///bkDrbtpDbtrbb25Db27bb2//b///n09Ln4dvn4eTn4e3n8O3n8Pbn8P/n////tmb/tpD/25D/27b/29v/4dv/8OT/8O3/8Pb//7b//9v//+3///b///9NQTU+AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAJ8UlEQVR4nO3daYPTVBSH8aDIKKBFUVkEUVFcURFQcd833EYHFcV1xsn3/wb2tp1O2hnnniQ3Of/mPr83SJ22yelD0iadtigBYYX3AgAHIVBII1BII1BII1BII1BII1BII1BII1BII1BII1BII1BII1BII1BII1BII1BII1BII1BII1BII1BII1BII1BII1BII1BII1BII1BII1BII1BII1BII1BII1BII1BII1BII1BII1BII1BII1BII1BII1BII1BII1BII1BII1BII1BII1BII1BII1BII1BII1BII1BII1BII1BII1BII1BII1BII1BII1BII1BII1BII1BII1BII1BII1BII1BII1BII1BII1BII1BII1BII1BII1BII1BII1BII1BII1BII1BII1BII1BII1BII1BII1BII1BIyy7Qa3e9Pf/vzROnJ39+fbIoiqMvVi7bPHHEY+GwR8aBbn2/+eDlre/L8noxdXz3MgJVkXGgd9buvu++4sj4z0Nh4/ntQ8Xp+WUEqiLjQMs/rhf3vLle3iymO/o7a0fmlxGoigwDfWu8Sz96owxPNB9ZO1WWv84CnZhdRqAqMgz04fB889DlsvzteHnz+Hq5dak49uL67H/PLiNQFfkFWtz1Url1vagEuPVssfsqfopAVeQXaNh2jrealaNN479+89y9RXHP+vwCAlWRX6DTMm9OOq3aer2yVSVQFQS6eWK25axuVQlURX6B7tnFX5u1SqCK8gu0OHxj8UXSr8WhR8fb0N8vsYsXlF+g08NM1ddIN2enOg9Xz9ITqIYMA33r2aI4tl697LuTa0Vx96OVywhURXaBYrUQKKQRKKQRKKQR6IFGQeVP9I1A97d/kfNe+1+gXBHoEtO2ku1pbwi0omZ1ZNoDAp1rkhv7+64RaNBqU8iGtEsEWtbete9/G+1vAvvIPtBUWz82o93IPNCUWRFoF3IONH1RbEaTiwR6phv9rNvBasRUY81Go9WaQg21H+UkU8g4UPuPDngKNfhMIc9Aa+6JBzqFmnymkGOgtZ8pDnIKtflMIcdAa2MKgc8Usgu0yevs4U2hCZ8pZBZos+NAQ5tCMz5TyCzQZphC4DOFnAJtfBR9UFNozGcKGQXa/CzPkKbQnM8Ucgq08TWHNIXmfKaQS6CtzpEPZgqt+Ewhk0DbvYljKFNox2cKeQTa8k1GA5lCSz5TyCPQlphC4DOFHAJt/R7NQUyhNZ8pDD/QBG8iXrEpdPR1oz5TyCDQ9jexUlPo7OtGfaYw/EATWKkpdPZ1oz5TGHigaX5HaLWm0NXXjfpMYdiBJvodtlWYwu8PFcXh59ce6O7rRn2mMPBA09zMCkzhztr0iyAe6O7rRn2mMOxAE9Gfwtal4v718uu1EOgMgXa3UIkk+x11/SlMvus+fOUTgfaxUGmk+wwF/SnMvvP+zhqB9rFQSST8kA/9KRBorwulRn8K7OJ7XagEkn5Gkv4UeJHU60K1l/ZDvFZgCpXDTDME2t1CtZf2Q+ZWYQqTA/Uv8By0l4VqL79AJ6ovkpLzmUKSQM+//3P44X9uvftEkoVSYx72hbL892XzTydcws0Th2+EreihywlvdElkbR77auGn//np0ydTTCFBoOe/rFzhR1OijQZklvxTZE2DDtwCLa9Nn4J2+SXikbVZCjQwxRC51/aBXli8xt+WB6jeZOpK/inHhjWaz8Ip0K03wlfen0p5k8sia7NPoOWf7afQOtDHb49/bOPV8G/l3JVfxv/9l+GfTcMRxUzLTP8x3IYxT/kF2oPI2oRAP5r/7exTX4TrfHTAFWxTaBvo2Q/Lcvud+d9eG1/nh9YL1VRXHxEfX6EZAq14pjRtrSL32jbQsAGtLFbo1fAQpZrZkq6+kzi6PjsItGJx29V0Cm0DXX5ILqRYqKZGM6lvN7o+/zcNlyl0JbI2ewKdbELj+/jIvaYOdO9iNliopkajbhKNrs//TcNlCl2JrM3eRz68fHYPdGkXb5RqZssS97lzO+b1GmKgI+MURLegYbG2PzEen7cuVGOJt547N2Zer2EGapuC6HPQ2WHQDes5JNNCNZZ4777Tu3m9hhqoZQqir+KnyxFs33rPdm4rvlCNJX72ufOEwbpaAw40PoXFQM9dnJxf9D8OOvb07fmPb2+8YrnGmdGKMa3UmbqBeq9VXQevzX5nkgyHxHt5s8jFL3avsZHg/KsK2yNTMeQtaGwKewPd/jjBFFK93e78lZ1IDc+LV+ShmT/9Mk9hwIHWPRe/vfFukimkfD/o9Fy845mk1KYPDIGaprD7HPRcOOFt2pMappD4DcuTt97Fn3kkmVz3RhxmqrzwjKxN9UXShdu2PalhCi0D3fOIhINf8WMLSSbXPQ7Ul5U3L0bWZuFVfDj4aCw0cvctA917IukZy2PUfmy9Mg06GGKgc5G1WTzMFA4+2kYRudeWgYalWtyjmx6jVDPriWXO9pUf6BSW3g863pOa3q/c9XPQq8sPydUB7eJ3WOY8QaBzkzeyW96lEbnXBO9mWviHEpYr/g8n0cj6YhjzfBoEOmPdyUfuNcU76su/5uePzn/l+X7QrsSnPEOgu6w7+ci9tj7MND0+O/mlpLNPfRD+2+9XProSX6EZAq0w7uQj99r+OOjCbx2XSc6/qjGs0RSBVtl28pF7TXCgfvKbcjv+Np3gajmqvllWaYJAq2w7+ci9JjmTdPbi55OTnD9/9qrtCmkm1hvbSp0h0KUdumknH7nXgX42U1pMIfCZAoEaMIXAZwoEasAUAp8pEKgBUwh8pkCgBkwh8JkCgRowhcBnCgRqwBQCnykQqAFTCHymQKAGTCHwmQKBGjCFwGcKBGrAFAKfKRCoAVMIfKZAoAZMIfCZAoEaMIXAZwoEasAUAp8pEKgBUwh8pkCgBkwh8JkCgRowhcBnCgRqwBQCnykQqAFTCHymQKAGTCHwmQKBGjCFwGcKBGrAFAKfKRCoAVMIfKZAoAZMIfCZAoEaMIXAZwoEasAUAp8pEKgBUwh8pkCgBkwh8JlCJFDAF4FCGoFCGoFCGoFCGoFCGoFCGoFCGoFCGoFCGoFCGoFCGoFCGoFCGoFCGoFCGoFCGoFCGoFCGoFCGoFCGoFCGoFCGoFCGoFCGoFCGoFCGoFCGoFCGoFCGoFCGoFCGoFCGoFCGoFCGoFCGoFCGoFCGoFCGoFCGoFCGoFCGoFCGoFCGoFCGoFCGoFCGoFCGoFCGoFCGoFCGoFCGoFCGoFCGoFCGoFCGoFCGoFCGoFCGoFCGoFCGoFCGoFCGoFCGoFCGoFCGoFCGoFCGoFCGoFCGoFCGoFCGoFCGoFCGoFCGoFCGoFCGoFCGoFCGoFCGoFCGoFCGoFCGoFCGoFCGoFCGoFCGoFCGoFCGoFC2n92w568XXSZLQAAAABJRU5ErkJggg==" /><!-- --></p>
<p>or save it into a file, e.g. with</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">ggsave</span>(<span class="st">&quot;sirdiagram.png&quot;</span>,my_diagram)</span></code></pre></div>
<p>To re-cap, these lines of code allowed us to specify and make a fairly simple flow diagram:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co">#specify model</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>mymodel <span class="ot">=</span> <span class="fu">list</span>( <span class="at">varlabels =</span> <span class="fu">c</span>(<span class="st">&quot;S&quot;</span>,<span class="st">&quot;I&quot;</span>,<span class="st">&quot;R&quot;</span>),</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>                <span class="at">flows =</span> <span class="fu">list</span>(<span class="at">S_flows =</span> <span class="fu">c</span>(<span class="st">&quot;-b*S*I&quot;</span>), </span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>                             <span class="at">I_flows =</span> <span class="fu">c</span>(<span class="st">&quot;b*S*I&quot;</span>,<span class="st">&quot;-g*I&quot;</span>), </span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>                             <span class="at">R_flows =</span> <span class="fu">c</span>(<span class="st">&quot;g*I&quot;</span>))</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>              )</span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a><span class="co">#prepare diagram</span></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>diagram_list <span class="ot">&lt;-</span> <span class="fu">prepare_diagram</span>(mymodel)</span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a><span class="co">#make diagram</span></span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>my_diagram <span class="ot">&lt;-</span> <span class="fu">make_diagram</span>(diagram_list)</span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a><span class="co">#plot diagram</span></span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(my_diagram)</span></code></pre></div>
</div>
</div>
<div id="another-example" class="section level2">
<h2>Another example</h2>
<p>Here is another example, the classical <a href="https://en.wikipedia.org/wiki/Lotka%E2%80%93Volterra_equations">predator-prey model (also known as Lotka-Volterra model)</a>. This model has two compartments/variables. The model is widely used in Ecology. It can also used in Immunology to model pathogen and immune response. In the context of immunology, the immune response is the predator, and the pathogens are the prey. We’ll label them <strong>Imm</strong> and <strong>Pat</strong>, just to show that one can use labels that are longer than a single letter. We will also include the following processes/flows:</p>
<ol style="list-style-type: decimal">
<li>Bacteria grow/divide at some maximum rate (which we label <em>g</em>) and saturate as they approach some maximum carrying capacity, <em>p<sub>max</sub></em>.</li>
<li>Bacteria die at a natural death rate (which we label <em>d<sub>P</sub></em>).</li>
<li>Bacteria are killed by the immune response at some rate <em>k</em>.</li>
<li>The immune response grows proportional to the number of bacteria and itself at some rate <em>r</em>.</li>
<li>The immune response decays at some rate (which we label <em>d<sub>I</sub></em>).</li>
</ol>
<p>To generate the diagram, you follow the same steps as above. First, create the model structure</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>varlabels <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&quot;Pat&quot;</span>,<span class="st">&quot;Imm&quot;</span>)</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>flows     <span class="ot">=</span> <span class="fu">list</span>(<span class="at">Pat_flows =</span> <span class="fu">c</span>(<span class="st">&quot;g*Pat*(1-Pat/pmax)&quot;</span>, <span class="st">&quot;-dP*Pat&quot;</span>, <span class="st">&quot;-k*Pat*Imm&quot;</span>),</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>                 <span class="at">Imm_flows =</span> <span class="fu">c</span>(<span class="st">&quot;r*Pat*Imm&quot;</span>, <span class="st">&quot;-dI*Imm&quot;</span>))</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>mymodel <span class="ot">=</span> <span class="fu">list</span>(<span class="at">varlabels =</span> varlabels, <span class="at">flows =</span> flows)</span></code></pre></div>
<p>Again, remember that all flows need to be valid mathematical expressions, i.e. if you typed them into <code>R</code>, they would work (provided you assigned numerical values to each variable and parameter).</p>
<p>Next, you use the same steps as above to create the model diagram. First, we prepare the diagram.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>diagram_list <span class="ot">&lt;-</span> <span class="fu">prepare_diagram</span>(mymodel)</span></code></pre></div>
<p>Next, we take the structure returned from <code>prepare_diagram()</code> and make the diagram. We also add the optional list <code>diagram_settings</code> to the call of <code>make_diagram</code>. This provides a quick preview of one of the ways you can customize the diagram. You’ll learn more about this <a href="./B_modify_diagrams_simple.html">in the next vignette</a>.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>diagram_settings <span class="ot">=</span> <span class="fu">list</span>(<span class="at">var_fill_color =</span> <span class="fu">c</span>(<span class="st">&#39;blue&#39;</span>,<span class="st">&#39;red&#39;</span>),</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>                        <span class="at">main_flow_linetype =</span> <span class="st">&quot;dashed&quot;</span>,</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>                        <span class="at">interaction_flow_size =</span> <span class="fl">1.5</span>)</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>my_diagram <span class="ot">&lt;-</span> <span class="fu">make_diagram</span>(diagram_list, diagram_settings) </span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(my_diagram)</span></code></pre></div>
<p><img src="data:image/png;base64,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" /><!-- --></p>
<p>As a reminder, for the purpose of generating the diagram, it is not required to write down ordinary differential equations (ODEs) for the model. In fact, you can make diagrams for any model that consists of compartments and flows. The underlying model could be a set of ODEs, or a discrete time model, or a stochastic one. It can even be a completely different system comprising compartments and flows, one that is not based on simulation models, as we discuss <a href="./E_non_model_diagrams.html">in this vignette</a>.</p>
<p>But for completeness, here are the ODE equations for the model we just plotted.</p>
<p><span class="math display">\[
\begin{aligned}
\frac{d}{dt}  Pat &amp; = g * Pat (1-\frac{Pat}{p_{max}}) - d_P * Pat - k * Pat * Imm \\
\frac{d}{dt} Imm &amp; = r * Pat * Imm - d_I * Imm
\end{aligned}
\]</span></p>
</div>
<div id="one-more-example" class="section level2">
<h2>One more example</h2>
<p>We’ll finish with one more model, this time a more complex one.</p>
<p>This is an SIR-type model that also includes an environmental component, i.e. infected individuals can shed the pathogen into the environment (e.g., Cholera in water) and susceptible individuals can get infected that way. We still allow for direct transmission. And on top of that, we are considering 2 distinct groups (e.g., children and adults) and stratify by them. They are assumed to shed into the same environment (which we label <strong>P</strong>). This gives us 3 SIR compartments each for adults and children, i.e., 6, and 1 environmental compartment, for a total of 7 compartments.</p>
<p>Here is the model specified in the format needed for <strong>flowdiagramr</strong>.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>varlabels <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&quot;Sc&quot;</span>,<span class="st">&quot;Ic&quot;</span>,<span class="st">&quot;Rc&quot;</span>,<span class="st">&quot;Sa&quot;</span>,<span class="st">&quot;Ia&quot;</span>,<span class="st">&quot;Ra&quot;</span>,<span class="st">&quot;P&quot;</span>)</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>flows <span class="ot">=</span> <span class="fu">list</span>(<span class="at">Sc_flows =</span> <span class="fu">c</span>(<span class="st">&quot;-Sc*bcc*Ic&quot;</span>,<span class="st">&quot;-Sc*bca*Ia&quot;</span>,<span class="st">&quot;-Sc*bcp*P&quot;</span>), </span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>             <span class="at">Ic_flows =</span> <span class="fu">c</span>(<span class="st">&quot;Sc*bcc*Ic&quot;</span>,<span class="st">&quot;Sc*bca*Ia&quot;</span>,<span class="st">&quot;Sc*bcp*P&quot;</span>,<span class="st">&quot;-gc*Ic&quot;</span>), </span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>             <span class="at">Rc_flows =</span> <span class="fu">c</span>(<span class="st">&quot;gc*Ic&quot;</span>),</span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>             <span class="at">Sa_flows =</span> <span class="fu">c</span>(<span class="st">&quot;-Sa*bac*Ic&quot;</span>,<span class="st">&quot;-Sa*baa*Ia&quot;</span>,<span class="st">&quot;-Sa*bap*P&quot;</span>), </span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>             <span class="at">Ia_flows =</span> <span class="fu">c</span>(<span class="st">&quot;Sa*bac*Ic&quot;</span>,<span class="st">&quot;Sa*baa*Ia&quot;</span>,<span class="st">&quot;Sa*bap*P&quot;</span>,<span class="st">&quot;-ga*Ia&quot;</span>), </span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>             <span class="at">Ra_flows =</span> <span class="fu">c</span>(<span class="st">&quot;ga*Ia&quot;</span>),</span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>             <span class="at">P_flows =</span> <span class="fu">c</span>(<span class="st">&quot;sc*Ic&quot;</span>,<span class="st">&quot;sa*Ia&quot;</span>,<span class="st">&quot;-d*P&quot;</span>)</span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a>             )</span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a>mymodel <span class="ot">=</span> <span class="fu">list</span>(<span class="at">varlabels =</span> varlabels, <span class="at">flows =</span> flows)</span></code></pre></div>
<p>Before we start making the diagram for this model, it is worth pointing out some current limitations of <strong>flowdiagramr</strong>. You might have noticed that each flow term above is defined separately. If you were to write down the model in math formulation, you would likely not do that. Instead, you would probably write something like this, with flow terms combined using parentheses:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>varlabels <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&quot;Sc&quot;</span>,<span class="st">&quot;Ic&quot;</span>,<span class="st">&quot;Rc&quot;</span>,<span class="st">&quot;Sa&quot;</span>,<span class="st">&quot;Ia&quot;</span>,<span class="st">&quot;Ra&quot;</span>,<span class="st">&quot;P&quot;</span>)</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>flows <span class="ot">=</span> <span class="fu">list</span>(<span class="at">Sc_flows =</span> <span class="fu">c</span>(<span class="st">&quot;-Sc*(bcc*Ic+bca*Ia+bcp*P)&quot;</span>),</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>             <span class="at">Ic_flows =</span> <span class="fu">c</span>(<span class="st">&quot;Sc*(bcc*Ic+bca*Ia+bcp*P)&quot;</span>,<span class="st">&quot;-gc*Ic&quot;</span>),</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>             <span class="at">Rc_flows =</span> <span class="fu">c</span>(<span class="st">&quot;gc*Ic&quot;</span>),</span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>             <span class="at">Sa_flows =</span> <span class="fu">c</span>(<span class="st">&quot;-Sa*(bac*Ic+baa*Ia+bap*P)&quot;</span>),</span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>             <span class="at">Ia_flows =</span> <span class="fu">c</span>(<span class="st">&quot;Sa*(bac*Ic+baa*Ia+bap*P)&quot;</span>,<span class="st">&quot;-ga*Ia&quot;</span>),</span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>             <span class="at">Ra_flows =</span> <span class="fu">c</span>(<span class="st">&quot;ga*Ia&quot;</span>),</span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>             <span class="at">P_flows =</span> <span class="fu">c</span>(<span class="st">&quot;sc*Ic&quot;</span>,<span class="st">&quot;sa*Ia&quot;</span>,<span class="st">&quot;-d*P&quot;</span>)</span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>             )</span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a>model_list_wrong <span class="ot">=</span> <span class="fu">list</span>(<span class="at">varlabels =</span> varlabels, <span class="at">flows =</span> flows)</span></code></pre></div>
<p>Unfortunately, <strong>flowdiagramr</strong> currently cannot parse flows that are grouped like this (we expect that a future version will). If you try to use this model list to prepare the diagram, you will receive a (hopefully informative) error message.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>diagram_list <span class="ot">&lt;-</span> <span class="fu">prepare_diagram</span>(model_list_wrong)</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Error in prepare_diagram(model_list_wrong): flowdiagramr cannot currently process flows that include</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; an interaction between more than two variables. Consider</span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; breaking flows apart.</span></span></code></pre></div>
<p>In general, <code>prepare_diagram</code> checks your <code>model_list</code> object and tries to determine if everything is ok. As an example, here is the model with some typos. We accidentally put minus (“-”) signs in front of all the <code>Ia_flows</code>.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>varlabels <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&quot;Sc&quot;</span>,<span class="st">&quot;Ic&quot;</span>,<span class="st">&quot;Rc&quot;</span>,<span class="st">&quot;Sa&quot;</span>,<span class="st">&quot;Ia&quot;</span>,<span class="st">&quot;Ra&quot;</span>,<span class="st">&quot;P&quot;</span>)</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>flows <span class="ot">=</span> <span class="fu">list</span>(<span class="at">Sc_flows =</span> <span class="fu">c</span>(<span class="st">&quot;-Sc*bcc*Ic&quot;</span>,<span class="st">&quot;-Sc*bca*Ia&quot;</span>,<span class="st">&quot;-Sc*bcp*P&quot;</span>),</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>             <span class="at">Ic_flows =</span> <span class="fu">c</span>(<span class="st">&quot;Sc*bcc*Ic&quot;</span>,<span class="st">&quot;Sc*bca*Ia&quot;</span>,<span class="st">&quot;Sc*bcp*P&quot;</span>,<span class="st">&quot;-gc*Ic&quot;</span>),</span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>             <span class="at">Rc_flows =</span> <span class="fu">c</span>(<span class="st">&quot;gc*Ic&quot;</span>),</span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>             <span class="at">Sa_flows =</span> <span class="fu">c</span>(<span class="st">&quot;-Sa*bac*Ic&quot;</span>,<span class="st">&quot;-Sa*baa*Ia&quot;</span>,<span class="st">&quot;-Sa*bap*P&quot;</span>),</span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>             <span class="at">Ia_flows =</span> <span class="fu">c</span>(<span class="st">&quot;-Sa*bac*Ic&quot;</span>,<span class="st">&quot;-Sa*baa*Ia&quot;</span>,<span class="st">&quot;-Sa*bap*P&quot;</span>,<span class="st">&quot;-ga*Ia&quot;</span>),</span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>             <span class="at">Ra_flows =</span> <span class="fu">c</span>(<span class="st">&quot;ga*Ia&quot;</span>),</span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a>             <span class="at">P_flows =</span> <span class="fu">c</span>(<span class="st">&quot;sc*Ic&quot;</span>,<span class="st">&quot;sa*Ia&quot;</span>,<span class="st">&quot;-d*P&quot;</span>)</span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a>             )</span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a>model_list_wrong2 <span class="ot">=</span> <span class="fu">list</span>(<span class="at">varlabels =</span> varlabels, <span class="at">flows =</span> flows)</span></code></pre></div>
<p>This means the model is not properly specified. <strong>flowdiagramr</strong> throws an error suggesting where you might have gone wrong.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>diagram_list <span class="ot">&lt;-</span> <span class="fu">prepare_diagram</span>(model_list_wrong2)</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Error in prepare_diagram(model_list_wrong2): There are duplicate flows across variables that failed to</span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; parse easily. Are there &#39;+&#39; signs where you intended</span></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; &#39;-&#39; signs, or vice versa.</span></span></code></pre></div>
<p>Not all model bugs return informative error messages. There are likely instances where you have typos or other mistakes in your model, or you try to include components in our model that <strong>flowdiagramr</strong> currently can’t handle, and you end up with a confusing error message from flowdiagramr. In this case, the first place to check for bugs is in your model specification, especially your model flows. Of course, you could have also found a bug in flowdiagramr, in which case please file an issue about in the Github site of the package!</p>
<p>Now, let’s go back to the first, proper model specification. We’ll first prepare the diagram, Similar to the prior example where we provided <code>make_diagram()</code> with optional settings, we do the same here for <code>prepare_diagram()</code>. This is just meant as another quick preview. The next vignette will discuss this in detail.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>model_settings <span class="ot">=</span> <span class="fu">list</span>(<span class="at">varbox_x_size =</span> <span class="dv">2</span>)</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>diagram_list <span class="ot">&lt;-</span> <span class="fu">prepare_diagram</span>(mymodel, model_settings)</span></code></pre></div>
<p>Now we make the diagram and plot it.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>model_plot <span class="ot">&lt;-</span> <span class="fu">make_diagram</span>(diagram_list)</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(model_plot)</span></code></pre></div>
<p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAqAAAAEgCAMAAABcujGyAAABv1BMVEUAAAAAAA4AABkAADoAAGYADg4ADhkADiUAGS4AOjoAOmYAOpAAZrYOAAAOGRkOGSUOJTgZAAAZDgAZDg4ZJS4ZLjgZLkElDgAlGQ4lLjglOEEuGQAuGQ4uLi4uLjguOEEuQTguQUE4JQ44LiU4OC44QUE6AAA6OgA6Ojo6OmY6OpA6ZmY6ZpA6ZrY6kLY6kNtAQEBBLhlBOCVBOC5BODhBQS5BQThmAABmADpmOgBmOjpmZgBmkJBmkLZmtttmtv9qpMhqpNJqpNtqtNJqtNtqtORqw+2FpMiFtMiFtNKFtNuFw9uFw+SFw+2F0/aQOgCQZjqQZmaQkGaQtpCQttuQ29uQ2/+epMietMietNKe0+2e0/ae4fae4f+2ZgC2Zjq2kDq2kGa2tra2ttu22/+2/9u2//+4tMi4w9K4w9u40+244e244fa48P/Qw8jQw9LQ09LQ09vQ4eTQ8PbQ8P/Q///bkDrbtmbbtpDbtrbb25Db27bb29vb2//b///n09Ln4dvn4eTn4e3n8O3n8Pbn8P/n////tmb/tpD/25D/27b/29v/4dv/8OT/8O3/8Pb//7b//9v//+3///b///+fNf7mAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAY7UlEQVR4nO2dj58WR33HF+5MCILNxUQsWFNMeDAKzaKFK9gQKJFWxRy2SJuoD01MUmtt0lQlGAqIxlyPoLmn7B/cnd2Z2fm5O7M/vzP7fb9emmN3n9mZz3x2ZnZ2dr9JhiCASabOAILUgQZFQIMGRUCDBkVAgwZFQIMGRUCDBkVAgwZFQIMGRUCDBkVAgwZFQIMGRUCDBkVAgwZFQIMGRUCDBkVAgwZFQIMGRUCDBkVAgwZFQIMGRUCDBkVAgwZFQIMGRUCDBkVAgwZFQIMGRUCDBkVAgwZFQIMGRUCDBkVAgwZFQIMGRUCDBkVAgwZFQIMGRUCDBkVAgwZFQIMGRUCDBkVAgwbtxq1zSZK8cE3Zurv5cv7/y/V36n9cHradFKydeGuYLIYNGrQTN0pzJSfFjas7u39zfXWnyaDsMGrQ3KLXh81skKBBu7CzWLuW/+fDs8nL0tYnvvrV5ECTQdlh2+WPVzfyvxEVNGgXblJj7iwkb31yI/nsT+82dvH0MGrQbLX12bsD5TNg0KBd2JZazgdnk+RrZCC5u/m3i/NkDPp2PgR44S1pn7CRHsYTaRyzzhE0aBdWW8mJa6zZ21mQgSQx2f+ezG6eJC3ot9jQstonbKSHYQtaBxq0E6urCbuLz836Yrb6V6FNXSbrPyyHlsK+ZZIPW6XxJjXoJ1fzYxAVNGhHVr/5wfEkydu+3U31HmdZ3JavttbfEfZVG9kWfhePPbwBNGgP5G3jgbwXVxtAOqa8uXZd2FdtZFvYPOhJ7OANoEE7sLtJR42kQexg0JczxAYatAtLajOlG6/2pmma7zt6emNfmm/I/5UeyX+SpmcO7X2H/JschgatAw3ahe1k7aW8DX2wVd4Inc/S5w7uy0onpvn90GPP8puk81l2i8yWLpP9b/GbJHJUnsgXiv+W/0Jk0KCduEnvbx47mqbfWCjPK+mMEunTd/i+5dpx5YZIaEGZT9GpHDRoe4iLnv/8wSR54qViKEom4/cLKz6W629fTZIT8j5xY4mli0efFqBBW8DauTa/9X1cNHefokF96WiYls8zZ+tTNKgz/Xik2wP3+fkUDepAn67oZUXIjFyKBq0npf+DRgo1Y32DBq0Ben8KPX99gAY1ElLVB5TVFqBBNQLsPAPMsitoUJmQmk6ZcHNeCxqUE0cFx1AGETQoIwp7xteQokHjq9MsmqstQ4MSoqlMgWiuuXkbNMK2UySG0s3aoOFXXxPhO3SmBo286ZQIu6hzNejUGRiVkB06P4OG3aC0JtRiz86gYVZTH4Tp0DkZNNRGpEfCU2BGBg2vcgYguIt0JgYNrVqGJSQ1ZmHQ4JqNoQlIkPgNGkxVjE0YwkRu0DR97vPtw3CUR+kfXYqDMJrRyA3aJQwHOypWg4bRhkZsUNJCdAnDwY6K16BZAM1ovAYthO8UhoMeFbVBwd/Sx2lQLnqLMBzZB8eT8quK9ChqUL45QgB7NEaDCt1WizAc9IuKL/KjSoNWmyME8OKuGA0q4h2GY3dzPW9HdzarkDCFQfXNyChEZlBDS+AbhiPL/ufN/BeKQfXN0QGzFY3LoDaJfcJwlJ29ZlBtc4RAdGhEBjWo2yIMx+5m8vWXfnpb7+LVzZECzaPRGNTcQTWE4dhzWAvDcYqMUdPTG48fy+jnOIvfldMBuzMwKLBmNB6DGrdqYTiyWwsxDAeLuFGF4dhODtwlc05iC7qP+Dbf/M2zcXfxJWjQ3qm56FkYjv15Z16G4dhzmO80heHI+3IlLiHr4guK8EbDlgYAgFrRCAxa3yndPrcownCQJtMpDAf544nzyyqcTDk0EDdD6wb7B04JIzBoA0N91n1+n4ufhMANWuuRURwUr01hFCxsg9olHPOTrmltTgIGQqHCNqiFKVo1GO1N/0xdqnANajbEtD6Z2KW3zrV/e4AexoLXn2D3klNfeKEa1KLb5M3YlBno8PYAP4waVAyKiwbtBUA3KxNlpcvbA/wwuoCWxQunTKhsiAY11j8Ud5ZMkZtObw+ww9gK79WW+Mxswos/QIOqYgFqO0VGz5b89oD6XoD49gDfJ2ykh/FEFEOjQdsD0Z0l4+ZMentAey9AeHug2idspIeZW9AJSsMIzKBKqwSz7RQZsx0V3h7QXwCo3h4Q9i2TfNgqjTepQT+5ani5ZRKxwzKoIhF0d5aMmEv+9kCmvQBQvT0g7JM2FvC7eNOQFQ3qDvy2U2TM3BZvD+gvAFSLs4V9wkYKmwc9aVlWOLrq4RhUquSg7EkYPsPS2wP6CwCVF4V9JoO+nNUytvLBGLQSJjhzMgbOuPj2gP4CQNWbk30peWcgN+gevYtvMOjY8gdjUEZYfbvMsHkX3x7Q3gtIjySPPUvuh/aVLweU+5b5xrTYWGYtdTDoyARh0JBNqTFcUYS3B6r3Atiy1ertAeGdgeXacemGiL2S1VSEEesjBINyOaIw6oCFYG8PZOULAJ955kg1uBTeHqheDhBfKSgpW9DGybHxKiIEgzJisCdhjFXUbqepf/4J4p0B8AalEk2vVK8MWhx3WzWuwSuT63iWTgA3KFUBwJXcM8O9J+VzvJNBrXkdpVKAGxTxwtcxbgYtk56okYBs0FhbT0aPJRtluGha5Dj4SQEblPlz6nwMSD+FG1Eh7ToY/LqAbNCpMzAOHYs5eteLjzoLIu/dBQIspLrocchzwTQoffAWXM21o20xp5ymVJblDncioAadTQdPaVXaiSUSLo/ZGTTEfq8TvuWFoY+0AHKgc8AzaKE9BPnHxavEIOxZUq2TGCZ9cAbNCwpH/XFxLDcseXhbPpBDwRkUVPMwLk79NozOXWTY/MAy6Dx79woXgw6fC38GXNEDyqDwWofxqVMAsDyDPZZGgwLDrsE81YFj0BR0CzEioYrAlkb2myoYg6I5BTQtwmg9h3j+B8WgEN4ugIP+fbRp8tGCvm9z4Rh06hyAIlw5+s45CIOGWx0jEFzX0u/NBASDBlcFoxDy24I9DthgGHTqHIAk4OsWeAvqFWxCGVSXR+mBiePAMwyHZNGglOnvkeAABvUKNiFfa+yoQKrBF88wHOK6mQCV6acZ7d+gXsEmlG6MHRVQNXjQIgwH1yc8ZXoah/ZvUK9gE2oZ6FHhVIMPrZRJ5aNCUgaoQeUP+JEPVX1NiCIhBpt48BTdpx1Fq4FvjoMWYTi0o6gy1QHA6ezR/g0qBZsovzZN2gY92MQ3DrJ92lFlNVSb46BFGA7tqFKZajNwunfzA9wkCcEm8ip5kXw0vWo5qmATq0Nsn35UUQ365tBxDcOxwfbRo8jHkCmFMvqPwdLZoYPMg/JgE/qIqfoS9Wm+Tz+KVkM4wy1XnMJw5HVa7VOOYqIom+ECsAUtKYJN7CzUXoh9tn/P4WqfflRRDfrmOGgKw3E4rfbxv1g9i4OfIAyadfRo7waVgk1YDfqVPdeLfcVcxM7iSaUjiNKgfmE4vvz8Rt7FbySfe7o4iglE+xb1x6Dp1M3334KKwSZsXfyZQ3kXv3GAXlzkKPmbwHF28S5hOIgyp4owHGRfEZAjP+rxY0ycQhT9x7CBZVAx2ER+n3M+y24J837LZP9b6epLyb70DN/Hj+Jzu+wmSflx4NSG4SiUyc58SQrDwY86JrWg+o/jZYAxqBBsgg6Wqk/5C8EmhH3aUeJIS9gcOsYwHGynKQyHfBQxKevireEKgdK6ER3iJkkINlHMte8X5tqX63/5RRZXotonHkVaUWGifn88E/VaGI4y1AZFUKbaJx1VKaP9GD5tHdpg0AuMV37+Efn3p7/72d9fsOOZUfGnl7Ps//65/DNNPVM3L/TJf/F3v5a2fPr79/+hS96V1D2Eaa+MoEuujGfqlhVQXrq0VuaCXAGpRaSG1NwM+sqvhG2/tddEY+bl60j8qVQRXqnbFvpc0Axam/vGvMv4CeOijCiNly621K0roLx06cugJY/e80zdyaCX5Y1/sgpmS4atG0uHMKhtoY9Jn5yHPVaDszAOyuipu+piS926AspLl34NmmX3/FJ3Mei3P87/uv8aucQuvf6H/O8/+rZC7PbcWg1dDGpb6EP1eZf//uJ3f0m2v+uXeo0y7sI0KaOO0Lx0saZuWwHlpUtng1bpfufH+e5H/+aVuoNBL/6nmOpFchL1KnCpBrL81loNzgYt7pv+sZjCb1oCpemT82pmdVGDUAZlPISpV6YPgwrCNK6A8tKlR4OW53nolbqDQUk7IZyEVItNMlsyaWqMkyL+1M2g9BkfWcfTuATKoI/iKR+hDHn3EKZJGVUaL11I6oIwzSugvHTp1aCG8zSk5mBQVaLL9rLYkunLoKut5K/uZrcWZJlT4xIogz7lJWzuyxqEMuTdQ5j2yrgZVBBGX+qkrYDy0qVXgxrO05BaC4NKJ/3uL/Jm5NH9f3GqBnWVuJhP+SxysrwodC36dlEPtiVQQup6RVzObJlvEMqgTK0wV35BBqXZR3QCp7Uy8kmUVLkygjCZfQXUX9DNTbo45t2ujFkS7Twuqft38SLVLMs9p2qo/qkVRawINVleFLomnSwjsS+BElKvbSmUszQIZVCmRpjvf1wdWUzgtFZG1EVLlSsjCKMvddJWQNXr4px3uzKcUQxKTvLov0wj6G8LRamt5FRuKNgfSs5ZRWjJ8qK4GpSlXjfWUs/SIJRBGbswr0qHPuyijKCLnipXRhBGX+rEV0A9XSyRahiDuufdrgzH1MX3Pgals333tacApFTZb/Nu4MrH9LS2ZPR2oviHmFhVEXqyvChuXXyVes3dqnaWBqFMytiEId5/9B7pHy+9Xp+6eo+kK1PpYkiVKyMIoy914iug0vT0BlkYVaeLe97rlGGYbpKUIXVDak4T9eyievS7fxfHPmTzPa5dQzuh/LNAzGdVEXqyvCjyTZKy1ondJD2Tps8d3FekLutz6cqvyHHvms/SIJRRGYswPxFqgY4D7MI0KFPpYkiVKyMIoy914iug0m8+lTx+LE+9Rhf3vNcqQxllmumCNCyp7lzI1fCwOjEpVuqJkE9eEYZkKfkPyhftkuRJ9ueewzyx0xv7Ummz+UnSPUvmW1WDURhyVj40ISe610EZrosp1UqZSpjTG+Vfe49Kwkib7bqYzuInjFSrkkHLC0Gdk2hIznWxyJVfVhvvl12aeBXnf3t0BlQ4cxdvSJYVJf9JMR/9T3yiXlzrxCbqn0qSx54tU9crgj0L1s/imHdVGYMwEvZKTtXm06iMeZpJMWj+u0oYbalTtQLqM88cyS9d06NO/Rl5bd5tqM2O4UpQbysbUnQ1aM4rr7O6KE1jkM6nGJllDGqf+OOzMPUvgwipK/o8uv8ze7075p1RI0zFpe/9nEzYaJXMG8pmZQxyVKmqyjS8JcNTt+vSnPfaxBV/6gb9kzZR3JCsh0GLXBePnEvJXu1iUC11XhGGZHnqu5ukyXxwtnYhZGqaZrpEHkQKLZx+Fse8W5QRhSFcvPIfH/HuX6/kGoMqqUsGVVPleXcSpkrdrotD3mtS1/pFyaCPPvrv10y1WounQS/Q6cN7ZR2rj29di2JIXTSo/Wn5shxI1b4FYpmovyzd+epnccy7XRkuDH0uX2GoZJtBtdQFg+qpVnl3EaZK3a6LS96tyZsNal2E4qR7s0G1PoaMTEjltjeokLpeEbUGXb1xkAywXFOX9CGTQrwmejCoVZiq3Xj0+/e/YxnHmQ2qK1OdxZBqlffVG4t8iOkmTFaji1PeLUxkUP15Ce0e23fxQup6RdR18aUO7qnL+pA5DmHSu2sXbxWmmGL99P3Xipkny42GpQXVlZFmN9RU2+bdrotL3i0Uy9UmMKg08SBq1v4mSUhdr4i6myQmhWvqyrpHIv5D5XTt824Vhji3YaqmXGJnL4dBF1OqbZWx6+KQdwt8XauoyBgGlaZuL9ANpCeTWpCftJ7sNlWEkqxWDU71oOtTPN1894L5LP55twkjtc60xk1J+BnUlKpBGRdpanRxzbteFr4iXVRkFIOSMYo4+8+e74hz3TQjLkVRUtcqwpCsVhS3ajA/yLCdxT/vNmGk8W1uWrWSq0e+DsqYx+Y0VUMltzGooEtT3i2IRRJrdRSDFj3AH/nKt1d+zcbUpFjv8aKQAjoURU1dqwhDsi2rwfwomHpKO4t/3m3CCOtCL/4oy9S+xeXqMuhiStVcyY3p1+jSkHcb5hf+RjAoXAIOgTH4CUaWpu5uTziqXeIBGzRIi46S51GVqZ2NkA9sk3ywBg2zDQ0xz/3RpvQBGzQbqT3qkfH8OVL/IkbKcTzek8ANOu8WqZYRpEkNr5I3/0b42+F4NOhYTJHXMTza4ScuPw7boD2G3BuaSS6lAS+KLklXL2A1Hxu4QQkBtaLj46ONTzRQ4wd7mijfnCKnSdPtcvnV2omGz2uGb9AA5pumzaHjyT2igbKX+H1LRQzKTnOKfsy36QPF4RtU+bw9QKa+gNyuD9dooFWD4F0sYlB2mu3kCySlMzca1rBGYNBCqalNAJ5mffyigbbRu+ji6WmoQdMzW/Vf2o/CoASgDgUz/pBHQqsbCy0uaHM0UCEN32I9OJckJz9cHOCnYQZNjVGeKyIxKF3sNXU2NKDYk8Gys+TDP59ooFVh/G+PSGpPEIPS05xiLeihGbWgYJorsNA2sPzuyAdu38LLPJ63W+DflahGD4VB8w7/akNI3GgMWgLJoHAvl/T0xtqJN+/QfzVEAzW9eup7Qv5lnsqg2+wuviGWTkwGNX5mfDKg5MPIV4rPrzx9t/FbeMe0YrS57uj7+uL9F5sHPdkQjCwmg3KHTm6N6XPQxO0iMvjjx3Y3k889/eXnxS5+Yx8Jx0Q29xYN1GhQtzDrURkUSA8P4Apx4ZNbZ9eulz45XYSrLfNdxFC1RgNtVzJjFz9Hg2ZMwUA8MhW5Ye6QoKHEoNZv4RmigbaWdandJM3XoM1vpA17+iCuDP4hEj3sZ1000NZlK4e0X1+gQaXx3/hmCcOe9EMkxRdaar6Fp0QD7VS0B1fZRD1lvgYV0dqzW+fyC/mFa8ph5TKehkcaTYt9Amk7WzNR8aI0qOwV4R836NzbSfFotr6m3qBNi30it+dk5YvSoIqc3K87i7Vr+X8+PCt1L2x9Tb1B6xb7xG7OKYnUoDrERDepMXcWksno+pqGLt662Cf2vn3aEsZrUFXUlKziFltOdRnPcv3tG9oSn/qIoPF7kzBpIeM1qOG6X20lf/bnx+g/tGU8y/Vv6Ut8aiOC7j06cpFmSMQGNbAqHvC9cC3V1utkZG5w/YfZ6kYxzmT7LBFBzxxKnkylzbEyeR8RuUH1RvQ3PzieFMGCtGU85aTfaqsYitJ92oiTxHRxfbEsAqa2Z/QGNbYAedN3wLCMh94k3cx9yvcJYTPKlFIWcHGMzCPxG1SEr30grWQV0pKtkjiylxm02rezeJLuZUafkUGnbz6zeRiUC82e3BGD6ut1liTGVbY6tPfoKbKviGtpjwg6TtYnBIQ952FQ3s9vl1NHD7aK117V9TpLEreuuEmq9tkjgiqbkYGYhUE5dPoo2f+OYb0OnWZal/aVo1FhzYQ4zdTwzYFwmfzevWI2Bi0lv32OrOLhM/DSep3l+ttXk+SEss8WEVTZHBVw7Dkjg8KSHXFlRgZFXADUuxfMy6DQ1IcHOIHmZVCAFQAJiNrMzaAEiPUAAJjdyywNCrImJgemKHM0KNS6mBC4l+w8DZpBrpLxgdylzNagoGsF4czXoEgB9Ot03gaFXjvDA16AeRs0gAoakCDKPneDEoKoqN4JpPdAg2bB1NUsQYPOkYCuSDQoI6BK60pIBUWDVszCoaEVEg0qE1r9eRJeN4EGVQivCl0Js2BoUBNBVmU9oV54aFATAYT49iLgwqBB7QRcrSJhX21oUDth12xJ8AVAgzYRcBXHcIWhQZsItZaDzLQOGtSNwKo71KtKBw3qRkA1HkxGnUCD+hBA3YdzIbmBBvWj5+pviF7nR2zeLECD+tNbd98Uvc6PGO2JBm1JmvVx31QXvc4nMwENkL1Bg7anuy2s0evcs9AxB+BBg3bEufla3ViwOHa10ev8zu2f4cBAg/ZDs1eWCftqeG30uoaY4PxsM/BmARq0L6RgNTplPJEPSOA6c/Q6fbPxJLNxJgUN2jM2n+5urp148075V4vQNvNzJgUNOgzUp4KpiggjJAyOHgWsLjjYbJ1JQYMOC/Np/t/bX9TCK1Jkg/LQdvN2JgUNOh5p+tfPnV27fnpjn+TAlAaoJZv7mV+NCTToSOwsDtwhQe7WrmP0Oh/QoGNRTjNVcZbnFr2uJWjQsVi9QYLcnSd/zjF6XVvQoAho0KAIaNCgCGjQoAho0KAIaNCgCGjQoAho0KAIaNCgCGjQoAho0KAIaNCgCGjQoAho0KAIaNCgCGjQoAho0KAIaNCgCGjQoAho0KAIaNCgCGjQoAho0KAIaNCgCGjQoAho0KAIaNCgCGjQoAho0KAIaNCgCGjQoAho0KAIaNCgCGjQoAho0KAIaNCgCGjQoAho0KAIaNCgCGj+H93oRC4eajU8AAAAAElFTkSuQmCC" /><!-- --></p>
<p>As you can see, while the most basic approach of using <strong>flowdiagramr</strong> that we just explained gets you <em>somewhere</em>, you might not be able to produce a publication-quality diagram using just the default settings. Fortunately, <strong>flowdiagramr</strong> gives you ways to easily customize things to give you great-looking diagrams! (At least we think so, but we might be a bit biased.)</p>
</div>
<div id="next-steps" class="section level2">
<h2>Next steps</h2>
<p>You just learned the basics of using <strong>flowdiagramr</strong> to produce a diagram. The default diagram you get this way might look ok (most of the time), but it likely won’t be great. Therefore, most of the time you will likely want to make modifications to get a diagram that looks the way you want. There are different ways to do this. <a href="./B_modify_diagrams_simple.html">The <em>Basic Modifications</em> vignette</a>, which you should read next, describes the easiest way to adjust the look of your model. Further vignettes show more advanced and complex ways to make further adjustments.</p>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
